version: "3"

volumes:
  cache:
    external: true

services:
  proxy:
    build: ./nginx
    volumes:
      - cache:/app/cache
    ports:
    - "80:80"
    environment:
      NGINX_BACKEND_HOST: app
      NGINX_BACKEND_PORT: 5000
      NGINX_MAX_SIZE: 200m # Enable cache
    depends_on:
      - app
  app:
    build: ./app
    ports:
    - "5000:5000"
